<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Deal Amazing ‚Äì Amazon Picks</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2472190760086309"
     crossorigin="anonymous"></script>

  <style>
    body { background:#f8f9fa; }
    .hover-card { transition: transform .25s ease, box-shadow .25s ease; }
    .hover-card:hover { transform: translateY(-6px); box-shadow: 0 12px 26px rgba(0,0,0,.12); }
    .product-img { max-height:220px; object-fit:contain; transition: transform .25s ease; }
    .hover-card:hover .product-img { transform: scale(1.04); }
    .title-2lines { line-height:1.3rem; height:2.6rem; overflow:hidden; }
    .star { font-size:1.05rem; line-height:1; }
    .logo { font-size: 2rem; font-weight: bold; color: #ff9900; display: flex; align-items:center; gap:8px; }
    .logo i { color:#232f3e; }
    #backToTop { position: fixed; bottom: 20px; right: 20px; background:#0d6efd; color:#fff; border:none; border-radius:50%; width:45px; height:45px; font-size:20px; cursor:pointer; display:none; box-shadow:0px 4px 6px rgba(0,0,0,.2); }
    #backToTop:hover { background:#0b5ed7; }
     /* Popup background overlay */
    .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: none; /* hidden by default */
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    /* Popup box */
    .popup-box {
      position: relative;
      background: #fff;
      padding: 10px;
      border-radius: 10px;
      max-width: 400px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      animation: fadeIn 0.3s ease;
    }

    /* Popup image */
    .popup-box img {
      width: 100%;
      border-radius: 8px;
    }

    /* Close button */
    .close-btn {
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 5px;
      font-weight: bold;
      color: #333;
      cursor: pointer;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body>
<!-- Popup Structure -->
  <div class="popup-overlay" id="popup">
    <div class="popup-box">
      <span class="close-btn" onclick="closePopup()">&times;</span>
      <a href="https://www.amazon.in/tryprime?tag=sidd95-21" target="_blank">
        <img src="IN-PRIME-300x250.jpg" alt="Advertisement">
      </a>
    </div>
  </div>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-white border-bottom">
  <div class="container d-flex justify-content-between align-items-center">
    <a class="navbar-brand logo" href="#"><i>üõçÔ∏è</i> Deal Amazing</a>
    <span class="small text-muted d-none d-lg-block">Amazon Associate Site</span>
  </div>
</nav>

<!-- Main Section -->
<main class="container py-4">
  <div class="row">
    
    <!-- Sidebar -->
    <div class="col-lg-3 mb-3">
      <!-- Mobile toggle button -->
      <button class="btn btn-outline-primary d-lg-none mb-3" type="button"
              data-bs-toggle="offcanvas" data-bs-target="#catOffcanvas">
        ‚ò∞ Categories
      </button>

      <!-- Sidebar for desktop -->
      <div class="list-group d-none d-lg-block" id="categorySidebar"></div>

      <!-- Sidebar Ad -->
      <div class="mt-3 d-none d-lg-block">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-2472190760086309"
             data-ad-slot="3804394858"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
    </div>

    <!-- Main content -->
    <div class="col-lg-9">
      <div class="row mb-4 g-3">
        <div class="col-lg-6">
          <input id="searchInput" class="form-control" placeholder="Search products‚Ä¶" />
        </div>
        <div class="col-lg-6">
          <select id="sortSelect" class="form-select" style="max-width:220px;">
            <option value="featured">Sort: Featured</option>
            <option value="priceAsc">Price: Low to High</option>
            <option value="priceDesc">Price: High to Low</option>
            <option value="ratingDesc">Rating: High to Low</option>
            <option value="reviewsDesc">Reviews: High to Low</option>
          </select>
        </div>
      </div>

      <!-- Product Grid -->
      <div class="row g-4" id="tabContent"></div>

      <!-- Disclaimer -->
      <div class="alert alert-info mt-5 text-center small">
        <strong>Disclaimer:</strong> As an Amazon Associate I earn from qualifying purchases.
        Prices, ratings, review counts and availability may change on Amazon.
      </div>
    </div>
  </div>
</main>

<!-- Offcanvas for mobile sidebar -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="catOffcanvas">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Categories</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body p-0">
    <div class="list-group" id="categorySidebarMobile"></div>
  </div>
</div>

<!-- Footer -->
<footer class="bg-white border-top mt-5">
  <div class="container py-4 text-center small text-muted">
    <p class="mb-1">¬© 2025 Deal Amazing ‚Äì Amazon Affiliate Website</p>
    <p class="mb-1">
      As an Amazon Associate I earn from qualifying purchases.  
      Product prices and availability are subject to change.
    </p>
    <p>
      <a href="privacypolicy.html" class="text-decoration-none me-3">Privacy Policy</a> | 
      <a href="contact.html" class="text-decoration-none ms-3">Contact Us</a> | 
      <a href="aboutus.html" class="text-decoration-none ms-3">About Us </a>
    </p>
  </div>
</footer>

<!-- Back to Top -->
<button id="backToTop" onclick="window.scrollTo({top:0, behavior:'smooth'});">‚Üë</button>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Show popup on page load
    window.onload = function() {
      document.getElementById("popup").style.display = "flex";
    }

    // Close popup
    function closePopup() {
      document.getElementById("popup").style.display = "none";
    }
</script>
<script>
let PRODUCTS = [];
let CATS = [];
let ACTIVE = 'All';

// Utilities
const money = s => s ? parseFloat(s.replace(/[^\d.]/g,'')) : 0;
const starHtml = n => Array.from({length:5}, (_,i)=>i<n?'<span class="text-warning">‚òÖ</span>':'<span class="text-secondary">‚òÜ</span>').join('');
const nf = v => v || v===0 ? new Intl.NumberFormat().format(v) : '';

// Load products
async function loadProducts(){
  try{
    const res = await fetch('product.json');
    PRODUCTS = await res.json();
    CATS = ['All', ...new Set(PRODUCTS.map(p=>p.Category))];
    renderSidebar();
    renderGrid();
  }catch(e){
    console.error("Error loading products", e);
    document.getElementById('tabContent').innerHTML='<div class="alert alert-danger">Failed to load products.</div>';
  }
}

// Render sidebar
function renderSidebar(){
  const desktop = document.getElementById('categorySidebar');
  const mobile = document.getElementById('categorySidebarMobile');
  desktop.innerHTML=''; mobile.innerHTML='';

  CATS.forEach(c=>{
    const btnDesktop = document.createElement('button');
    btnDesktop.className='list-group-item list-group-item-action';
    btnDesktop.textContent=c;
    btnDesktop.onclick = () => { ACTIVE=c; renderGrid(); };

    const btnMobile = btnDesktop.cloneNode(true);
    btnMobile.onclick = () => { ACTIVE=c; renderGrid(); };

    desktop.appendChild(btnDesktop);
    mobile.appendChild(btnMobile);
  });
}

// Render grid (filtered or full)
function renderGrid(filteredProducts = null){
  const row = document.getElementById('tabContent');
  row.innerHTML='';
  let list = filteredProducts || PRODUCTS.filter(p=>ACTIVE==='All'||p.Category===ACTIVE);

  list.forEach((p,index)=>{
    const col = document.createElement('div');
    col.className='col-lg-3 col-md-4 col-sm-6';
    const badge = p.Badge ? `<span class="badge bg-danger position-absolute top-0 start-0 m-2">${p.Badge}</span>` :
                  p.DiscountPercent ? `<span class="badge bg-danger position-absolute top-0 start-0 m-2">-${p.DiscountPercent}% OFF</span>`:'';
    col.innerHTML=`<div class="card h-100 border-0 rounded-4 shadow-sm hover-card position-relative">
      ${badge}
      <img class="product-img w-100 p-3" src="${p.ImageUrl}" alt="${p.Title}">
      <div class="card-body d-flex flex-column">
        <h6 class="title-2lines fw-semibold">${p.Title}</h6>
        <div class="mb-1">${starHtml(p.StarRating)} <small class="text-muted">(${nf(p.ReviewCount)} reviews)</small></div>
        <p class="text-success fw-bold mb-0">‚Çπ ${p.Price}</p>
        <a class="btn btn-warning text-dark fw-bold mt-auto" href="${p.AffiliateLink}" target="_blank" rel="nofollow noopener noreferrer">üõí Buy Now on Amazon</a>
      </div>
    </div>`;
    row.appendChild(col);

    // Insert Ad every 6 products
    if((index+1)%6===0){
      const adCol=document.createElement('div');
      adCol.className='col-12 text-center my-3';
      adCol.innerHTML=`<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2472190760086309" data-ad-slot="3804394858" data-ad-format="auto" data-full-width-responsive="true"></ins>`;
      row.appendChild(adCol);
      (adsbygoogle=window.adsbygoogle||[]).push({});
    }
  });
}

// Search functionality
document.getElementById('searchInput').addEventListener('input', function() {
  const query = this.value.toLowerCase();
  const filtered = PRODUCTS.filter(p => 
    (ACTIVE==='All' || p.Category===ACTIVE) &&
    p.Title.toLowerCase().includes(query)
  );
  renderGrid(filtered);
});

// Sort functionality
document.getElementById('sortSelect').addEventListener('change', function() {
  const sortBy = this.value;
  let sorted = PRODUCTS.filter(p => ACTIVE==='All' || p.Category===ACTIVE);

  switch(sortBy){
    case 'priceAsc': sorted.sort((a,b)=>money(a.Price)-money(b.Price)); break;
    case 'priceDesc': sorted.sort((a,b)=>money(b.Price)-money(a.Price)); break;
    case 'ratingDesc': sorted.sort((a,b)=>b.StarRating-a.StarRating); break;
    case 'reviewsDesc': sorted.sort((a,b)=>b.ReviewCount-a.ReviewCount); break;
  }

  renderGrid(sorted);
});

// Back to top button
window.onscroll = function(){
  let btn=document.getElementById('backToTop');
  (document.body.scrollTop>200 || document.documentElement.scrollTop>200)? btn.style.display='block':btn.style.display='none';
};

window.onload = loadProducts;
</script>

</body>
</html>
